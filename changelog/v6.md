# Changelog - Version 6.x

All notable changes for major version 6 of the SDD plugin.

---

## [6.2.4] - 2026-02-07

### Fixed

- **project-settings**: Remove consumer references (self-containment violation)
  - Removed `## How to Reference This Skill` section (listed callers)
  - Removed `## Related Commands` section (listed invoking commands)
  - Removed caller reference from Minimal Template heading

---

## [6.2.3] - 2026-02-07

### Fixed

- **project-settings**: Fix skills-standards violations
  - Renamed H1 from "Project Settings Skill" to "Project Settings" (must match `name` in title-case)
  - Replaced blockquote with one-line summary paragraph
  - Moved `## Input` / `## Output` before core sections per standard structure
  - Added `markdown` language specifier to two bare code blocks

---

## [6.2.2] - 2026-02-07

### Fixed

- **project-settings**: Add missing testing and cicd component types to schema and documentation
  - Added `if/then` blocks in `sdd-settings.schema.json` to constrain testing/cicd settings to empty objects
  - Added Testing Settings and CI/CD Settings sections to SKILL.md
  - Added testing and cicd directory mappings to the directory structure table
  - Cleaned up leftover task files from incomplete status move

### Rationale

The JSON Schema declared `testing` and `cicd` in the component type enum but had no `if/then` constraints for their settings and no documentation in SKILL.md. This left them unconstrained and undocumented.

---

## [6.2.1] - 2026-02-07

### Refactored

- **project-settings**: Centralize all sdd-settings schema ownership
  - Enhanced project-settings skill as the single authoritative source for schema, validation, and directory mappings
  - Added "Authoritative Source" declaration, "Minimal Template" section, and "How to Reference This Skill" guidance
  - De-duplicated inline schema/settings tables from 21 files across skills, agents, and commands
  - Net reduction of ~294 lines of duplicated settings knowledge
  - All files now reference `project-settings` skill instead of inlining schema details

### Rationale

Many skills, agents, and commands duplicated `.sdd/sdd-settings.yaml` schema knowledge inline — component settings tables, validation rules, directory mappings, and YAML examples. This made updates error-prone and inconsistent. Centralizing ownership in the `project-settings` skill ensures a single source of truth.

---

## [6.2.0] - 2026-02-07

### Changed

- **agents**: Merge ci-dev agent into devops agent
  - CI/CD pipeline responsibilities (GitHub Actions, PR checks, build automation) absorbed into devops
  - ci-dev.md deleted — devops now owns both infrastructure and CI/CD
  - Added `## Skills` section with `postgresql` reference and `## Working Directory` section (fixes standards violations)
  - Agent count reduced from 8 to 7
  - Updated README, docs/agents.md, and marketplace.json

### Rationale

ci-dev and devops had significant overlap (both handled Testkube, build pipelines, deployment). The boundary between "infrastructure" and "CI/CD pipelines" was artificial. Merging simplifies the agent roster and eliminates the unclear responsibility split.

---

## [6.1.8] - 2026-02-06

### Removed

- **epic-planning**: Merge into change-creation skill and delete
  - Epic lifecycle, implementation workflow, and failure handling added to change-creation
  - Epic-specific schema fields (child_changes, acceptance_criteria, cross_cutting_concerns) merged into change-creation schemas
  - Updated planning and spec-decomposition skills to reference change-creation instead

### Rationale

epic-planning duplicated ~90% of change-creation's epic handling. Merging eliminates a separate skill, reduces maintenance, and follows the self-containment principle from skills-standards (no cross-skill file references).

---

## [6.1.7] - 2026-02-06

### Changed

- **change-creation**: Extract 8 inline templates into `templates/` subdirectory
  - SKILL.md reduced from 1398 to 261 lines (81% reduction)
  - Eliminates nested markdown fence rendering issues
  - Templates: spec-feature, spec-bugfix, spec-refactor, spec-epic, plan-feature, plan-bugfix, plan-refactor, plan-epic

---

## [6.1.6] - 2026-02-06

### Enhanced

- **All 35 plugin skills**: Skills standards audit compliance fixes
  - Fix 3 broken cross-references (api-design, plugin-testing-standards)
  - Add language tags to ~107 bare code blocks across 32 skills
  - Add "no input/output" note to 15 standards-only skills
  - Fix spec-solicitation description caller reference
  - Rewrite 13 Related Skills sections with delegation contracts
  - Fix 5 vague "Follow X"/"See X" cross-references
  - Remove "called by" body text from 8 skills
  - Resolve 6 informational dependency cycles (scaffolding ↔ standards)
  - Add sdd-system CLI prerequisite to 8 skills

### Added

- **Input/output schemas**: 34 colocated JSON Schema files (Draft 2020-12)
  - 14 process skills: input.schema.json + output.schema.json
  - 6 scaffolding skills: input.schema.json
  - All schemas derived from existing inline documentation
  - SKILL.md files updated with schema references

### Rationale

Audit found systemic violations across all 35 skills: no schemas existed, ~107 code blocks lacked language tags, 20 skills had self-containment issues, and 6 bilateral dependency cycles existed. Fixes improve LLM skill selection accuracy and enable future schema-based validation (#27).

---

## [6.1.5] - 2026-02-06

### Removed

- **check-tools skill**: Inline environment check into sdd-init, remove single-use skill
  - Rename concept from "check-tools" to "check environment"
  - Tool tables, detection rules, and output format now self-contained in sdd-init Phase 1.0

---

## [6.1.4] - 2026-02-06

### Removed

- **product-discovery skill**: Remove product-discovery skill and all references
  - This plugin is for technical specs, not product specs
  - Remove domain-population from speccing phase (belongs in implementation only)
  - Update component-discovery, domain-population, external-spec-integration skills
  - Update sdd-change, sdd-init commands and all documentation

### Rationale

Product discovery (personas, workflows, domain entities) is outside the scope of a technical specification tool. Domain population belongs in the implementation phase where it reads from SPEC.md content, not during speccing/planning.

---

## [6.1.3] - 2026-02-06

### Fixed

- **Skills**: Remove Python references from skill documentation (spec-index, spec-writing, frontend-scaffolding)
  - Replace `actions/setup-python` with `actions/setup-node` in CI example
  - Replace `validate-spec.py` with `npx sdd-system spec validate` command
  - Rewrite Python code example as TypeScript

---

## [6.1.2] - 2026-02-06

### Changed

- **Component skills**: Reorganize 15 component-specific skills into colocated `plugin/skills/components/<type>/` directory structure
  - backend, config, contract, database, frontend, helm, cicd, integration-testing, e2e-testing
- **Scaffolding**: Update template path references in `project.ts` and scaffolding SKILL.md
- **Tests**: Update path constants across 6 test files

---

## [6.1.1] - 2026-02-06

### Changed

- **All 37 plugin skills**: Add `user-invocable: false` frontmatter to hide internal skills from user `/` command menu
- **check-tools, local-env**: Add missing `name` and `description` frontmatter fields

---

## [6.1.0] - 2026-02-05

### Added

- **TypeScript enforcement for phase gating**: New `workflow` namespace in sdd-system CLI
  - `sdd-system workflow check-gate --target <phase>` programmatically enforces phase transitions
  - Four gate types: plan (specs approved), implement (plans approved), review (impl complete), completion (reviews approved)
  - Hierarchical item handling for epics with children
  - Stale dependency detection (`needs_rereview` status)

- **Product/Tech spec distinction**: Conditional validation based on `spec_type` field
  - Product specs: fewer required fields (no issue, no sdd_version)
  - Tech specs: full validation including `type` (feature/bugfix/refactor/epic)

- **Four-field status model**: Per-item workflow tracking
  - `spec_status`, `plan_status`, `impl_status`, `review_status`
  - Enables granular progress tracking and phase gating

- **New documentation**: `docs/external-specs.md`, `docs/workflow-progress.md`

### Changed

- **component-recommendation → component-discovery**: Renamed skill, read-only analysis
- **Skills updated**: workflow-state, spec-writing, spec-solicitation, external-spec-integration, planning, product-discovery, project-scaffolding, spec-decomposition
- **Commands updated**: sdd-change.md (new actions), sdd-init.md (component types table)
- **Validation tests**: 59 new tests for workflow check-gate, updated spec validation tests

---

## [6.0.0] - 2026-02-05

### Breaking Changes

- **Unified `/sdd-change` command**: Replaces three separate commands with a single command and subcommands
  - `/sdd-new-change` → `/sdd-change new`
  - `/sdd-implement-change` → `/sdd-change implement`
  - `/sdd-verify-change` → `/sdd-change verify`
  - New subcommands: `status`, `continue`, `list`, `approve spec`, `approve plan`

### Added

- **workflow-state skill**: New skill for managing `.sdd/workflows/` state with zero session context
  - All workflow state persisted in `workflow.yaml`
  - New session can resume with only file contents
  - Workflow IDs (6-char alphanumeric) and change IDs (`<workflow-short>-<seq>`)

- **spec-solicitation skill**: Guided 9-step requirements gathering workflow
  - Context, Functional, Non-Functional, User Stories, Acceptance Criteria
  - Edge Cases, Dependencies, Tests, Technical Architecture
  - Full Q&A trail preserved in solicitation-workflow.yaml

- **Two-stage approval workflow**: Spec review → Plan review → Implementation
  - `spec_review` → `plan_review` → `plan_approved` → `implementing` → `verifying` → `complete`
  - Implementation blocked until both spec and plan are approved

- **Domain Model section in specs**: Comprehensive domain analysis
  - Entities with definitions and spec file paths
  - Relationships between entities
  - Glossary terms with precise definitions
  - Bounded contexts identification

- **Specs Directory Changes section**: Impact analysis for specs/
  - Before/after tree visualization
  - Changes summary with action (create/modify) and description

- **Checkpoint commits**: Automatic commits on feature branches during implementation
  - Recovery point after each phase
  - Uses `--no-verify` for speed

- **API-first implementation ordering**: Contracts → Data → Backend → Frontend → Infrastructure

### Changed

- **external-spec-integration skill**: Major rewrite
  - Archives to `.sdd/archive/external-specs/` with `yyyymmdd-filename.md` format
  - Creates workflow items with context files, not full specs
  - Includes thinking step with domain analysis

- **change-creation skill**: Added new spec sections
  - Domain Model, Specs Directory Changes, Components, System Analysis, Requirements Discovery

- **spec-decomposition skill**: Added thinking step
  - Domain extraction, gap analysis, API-first ordering
  - Outputs domain_model, specs_impact, gaps_identified, api_first_order

- **spec-writing skill**: Added new required sections
  - Domain Model, Specs Directory Changes, Components, System Analysis, Requirements Discovery, Testing Strategy

- **planning skill**: Workflow integration
  - Plan creation triggered by spec approval via `/sdd-change approve spec`

- **PERMISSIONS.md hook**: Added `.sdd/` and `changes/` to safe directories

- **Documentation**: Updated all command references
  - README.md, docs/commands.md, docs/getting-started.md
  - docs/workflows.md, docs/tutorial.md, docs/agents.md

- **Templates**: Updated project scaffolding templates
  - project/CLAUDE.md, project/README.md

- **Test files**: Renamed to match new command structure
  - `sdd-new-change.test.ts` → `sdd-change-new.test.ts`
  - `sdd-new-change-external-spec.test.ts` → `sdd-change-new-external.test.ts`

### Removed

- `/sdd-new-change` command (use `/sdd-change new`)
- `/sdd-implement-change` command (use `/sdd-change implement`)
- `/sdd-verify-change` command (use `/sdd-change verify`)

### Migration Guide

| Old Command | New Command |
|-------------|-------------|
| `/sdd-new-change --type feature --name X` | `/sdd-change new --type feature --name X` |
| `/sdd-new-change --spec path` | `/sdd-change new --spec path` |
| `/sdd-implement-change dir` | `/sdd-change implement <change-id>` |
| `/sdd-verify-change dir` | `/sdd-change verify <change-id>` |

New workflow commands:
- `/sdd-change status` - Show current workflow status
- `/sdd-change continue` - Resume current workflow
- `/sdd-change approve spec <id>` - Approve spec, create plan
- `/sdd-change approve plan <id>` - Approve plan, enable implementation
- `/sdd-change list` - List all active workflows

### Rationale

This major version introduces a zero-session-context architecture where all workflow state is persisted in `.sdd/workflows/`. This enables:
- Session recovery without conversation history
- Multi-user safety with workflow-scoped change IDs
- Two-stage approval for quality gates before implementation
- Comprehensive domain analysis during spec creation
